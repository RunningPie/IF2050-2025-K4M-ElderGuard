<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<BorderPane xmlns:fx="http://javafx.com/fxml"
            prefHeight="600.0" prefWidth="900.0" style="-fx-background-color: #f5f5f5;"
            fx:controller="controllers.AccountController">

    <left>
        <StackPane fx:id="sidebarContainer">
            <!-- Expanded Sidebar -->
            <VBox fx:id="expandedSidebar" alignment="TOP_LEFT" prefWidth="250" spacing="8" style="-fx-background-color: #0C3C78; -fx-padding: 15;">
                <!-- Header with Toggle Button -->
                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label alignment="CENTER" style="-fx-font-size: 18px; -fx-font-weight: bold;" text="ElderGuard" textFill="white" />
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button fx:id="toggleSidebarButton" onAction="#toggleSidebar" prefWidth="30" prefHeight="30"
                            style="-fx-background-color: transparent; -fx-text-fill: white; -fx-font-size: 16px; -fx-border-color: transparent;"
                            text="&lt;"/>
                </HBox>

                <Region prefHeight="15"/>

                <!-- Navigation Buttons -->
                <VBox spacing="8">
                    <Button fx:id="dashboardButton" alignment="CENTER_LEFT" onAction="#handleDashboard" prefWidth="220" prefHeight="40"
                            style="-fx-background-color: transparent; -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 10; -fx-background-radius: 5;"
                            text="Dashboard" />

                    <Button fx:id="emergencyAlertsButton" alignment="CENTER_LEFT" onAction="#handleEmergencyAlerts" prefWidth="220" prefHeight="40"
                            style="-fx-background-color: transparent; -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 10; -fx-background-radius: 5;"
                            text="Emergency Alerts" />

                    <Button fx:id="accountButton" alignment="CENTER_LEFT" onAction="#handleAccount" prefWidth="220" prefHeight="40"
                            style="-fx-background-color: #bbcfec; -fx-text-fill: black; -fx-font-size: 14px; -fx-padding: 10; -fx-background-radius: 5; -fx-font-weight: bold;"
                            text="Account" />
                </VBox>

                <!-- Spacer -->
                <Pane VBox.vgrow="ALWAYS" />

                <!-- Logout Button -->
                <Button alignment="CENTER_LEFT" onAction="#handleLogout" prefWidth="220" prefHeight="40"
                        style="-fx-background-color: transparent; -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 10; -fx-background-radius: 5; -fx-border-color: white; -fx-border-width: 1; -fx-border-radius: 5;"
                        text="Logout" />
            </VBox>

            <!-- Collapsed Sidebar -->
            <VBox fx:id="collapsedSidebar" alignment="TOP_CENTER" prefWidth="60" spacing="8" style="-fx-background-color: #0C3C78; -fx-padding: 15;" visible="false">
                <!-- Toggle Button -->
                <Button fx:id="toggleSidebarButtonCollapsed" onAction="#toggleSidebar" prefWidth="30" prefHeight="30"
                        style="-fx-background-color: transparent; -fx-text-fill: white; -fx-font-size: 16px; -fx-border-color: transparent;"
                        text="&gt;"/>

                <Region prefHeight="15"/>

                <!-- Icon-only Navigation Buttons -->
                <VBox spacing="8" alignment="TOP_CENTER">
                    <Button fx:id="dashboardButtonCollapsed" alignment="CENTER" onAction="#handleDashboard" prefWidth="40" prefHeight="40"
                            style="-fx-background-color: transparent; -fx-text-fill: white; -fx-font-size: 14px; -fx-background-radius: 5;"
                            text="D" />

                    <Button fx:id="emergencyAlertsButtonCollapsed" alignment="CENTER" onAction="#handleEmergencyAlerts" prefWidth="40" prefHeight="40"
                            style="-fx-background-color: transparent; -fx-text-fill: white; -fx-font-size: 14px; -fx-background-radius: 5;"
                            text="E" />

                    <Button fx:id="accountButtonCollapsed" alignment="CENTER" onAction="#handleAccount" prefWidth="40" prefHeight="40"
                            style="-fx-background-color: #bbcfec; -fx-text-fill: black; -fx-font-size: 14px; -fx-background-radius: 5;"
                            text="A" />
                </VBox>

                <!-- Spacer -->
                <Pane VBox.vgrow="ALWAYS" />

                <!-- Logout Button -->
                <Button alignment="CENTER" onAction="#handleLogout" prefWidth="40" prefHeight="40"
                        style="-fx-background-color: transparent; -fx-text-fill: white; -fx-font-size: 14px; -fx-background-radius: 5; -fx-border-color: white; -fx-border-width: 1; -fx-border-radius: 5;"
                        text="L" />
            </VBox>
        </StackPane>
    </left>

    <!-- Main Content -->
    <center>
        <ScrollPane fitToWidth="true" style="-fx-background-color: transparent;">
            <VBox spacing="25" style="-fx-padding: 30;">

                <!-- Account Header -->
                <VBox spacing="8">
                    <Label text="Account" style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
                    <Separator prefWidth="700" style="-fx-background-color: #e9ecef;"/>
                </VBox>

                <!-- Account Form Container -->
                <VBox spacing="20" style="-fx-max-width: 500;">

                    <!-- Name Field -->
                    <VBox spacing="6">
                        <Label text="Name" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
                        <HBox spacing="8" alignment="CENTER_LEFT">
                            <TextField fx:id="nameField" prefWidth="400" prefHeight="35"
                                       style="-fx-background-color: #bbcfec; -fx-border-color: transparent; -fx-background-radius: 5; -fx-padding: 8; -fx-font-size: 13px;"
                                       editable="false"/>
                            <Button fx:id="editNameButton" onAction="#editName" prefWidth="28" prefHeight="28"
                                    style="-fx-background-color: transparent; -fx-border-color: transparent; -fx-font-size: 12px;"
                                    text="Edit"/>
                        </HBox>
                    </VBox>

                    <!-- Phone Number Field -->
                    <VBox spacing="6">
                        <Label text="Phone Number" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
                        <HBox spacing="8" alignment="CENTER_LEFT">
                            <TextField fx:id="phoneField" prefWidth="400" prefHeight="35"
                                       style="-fx-background-color: #bbcfec; -fx-border-color: transparent; -fx-background-radius: 5; -fx-padding: 8; -fx-font-size: 13px;"
                                       editable="false"/>
                            <Button fx:id="editPhoneButton" onAction="#editPhone" prefWidth="28" prefHeight="28"
                                    style="-fx-background-color: transparent; -fx-border-color: transparent; -fx-font-size: 12px;"
                                    text="Edit"/>
                        </HBox>
                    </VBox>

                    <!-- Password Field -->
                    <VBox spacing="6">
                        <Label text="Password" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" />
                        <HBox spacing="8" alignment="CENTER_LEFT">
                            <Button
                                    fx:id="editPasswordButton"
                                    prefWidth="400"
                                    prefHeight="35"
                                    text="Edit Password"
                                    onAction="#editPassword"
                                    alignment="CENTER_LEFT"
                                    style="-fx-background-color: #bbcfec; -fx-border-color: transparent; -fx-font-size: 12px;" />
                        </HBox>
                    </VBox>


                    <!-- Action Buttons -->
                    <HBox spacing="12" style="-fx-padding: 15 0 0 0;">
                        <Button fx:id="saveButton" onAction="#saveChanges" text="Save Changes" prefWidth="110" prefHeight="35"
                                style="-fx-background-color: #28a745; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 5; -fx-font-size: 13px;"
                                visible="false"/>
                        <Button fx:id="cancelButton" onAction="#cancelChanges" text="Cancel" prefWidth="110" prefHeight="35"
                                style="-fx-background-color: #6c757d; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 5; -fx-font-size: 13px;"
                                visible="false"/>
                    </HBox>

                    <!-- Status Label -->
                    <Label fx:id="statusLabel" style="-fx-font-size: 13px; -fx-padding: 8 0 0 0;" wrapText="true"/>

                </VBox>

            </VBox>
        </ScrollPane>
    </center>

</BorderPane>